[build]
builder = "railpack"

[deploy]
# Run migrations before starting the app
# Uses scripts/migrate.py which handles stamping for existing databases
releaseCommand = "uv run python scripts/migrate.py"
startCommand = "uv run uvicorn app.main:app --host 0.0.0.0 --port $PORT --no-access-log"
healthcheckPath = "/health"
healthcheckTimeout = 30
restartPolicyType = "on_failure"
restartPolicyMaxRetries = 3
#sleepApplication = true
