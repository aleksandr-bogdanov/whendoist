/* =============================================================================
   Loading States - Spinners and Skeletons
   ============================================================================= */

/* Spinner animation */
@keyframes spin {
    to { transform: rotate(360deg); }
}

.spinner {
    width: 20px;
    height: 20px;
    border: 2px solid var(--border-default);
    border-top-color: var(--primary);
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
}

.spinner-sm { width: 14px; height: 14px; border-width: 1.5px; }
.spinner-lg { width: 32px; height: 32px; border-width: 3px; }

/* Skeleton loading */
@keyframes shimmer {
    0% { background-position: -200% 0; }
    100% { background-position: 200% 0; }
}

.skeleton {
    background: linear-gradient(
        90deg,
        var(--bg-panel) 25%,
        var(--bg-surface) 50%,
        var(--bg-panel) 75%
    );
    background-size: 200% 100%;
    animation: shimmer 1.5s infinite;
    border-radius: var(--radius-sm);
}

.skeleton-text { height: 1em; margin-bottom: 0.5em; }
.skeleton-title { height: 1.5em; width: 60%; }
.skeleton-avatar { width: 40px; height: 40px; border-radius: 50%; }
.skeleton-btn { height: 32px; width: 80px; }
.skeleton-row { height: 44px; width: 100%; }

/* ===== Toast Notifications ===== */

/* Toast container (positioned fixed) */
.toast-container {
    position: fixed;
    bottom: 18px;
    left: 24px;
    z-index: 1100;  /* Above wizard (z-index: 1000) */
    pointer-events: none;
    display: flex;
    flex-direction: column;
    gap: 8px;
}

/* Toast base */
.toast {
    display: flex !important;
    flex-direction: row !important;
    align-items: center !important;
    gap: 10px !important;
    max-width: 440px;
    padding: 8px 10px !important;
    margin: 0 !important;
    background: rgba(255, 255, 255, 0.90) !important;
    color: var(--text, #0F1222) !important;
    border: 1px solid var(--border) !important;
    border-radius: 12px !important;
    box-shadow: 0 10px 24px rgba(15, 23, 42, 0.12) !important;
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    opacity: 0;
    transform: translateY(20px);
    transition: opacity 0.2s ease, transform 0.2s ease;
    pointer-events: none;
}

.toast.visible {
    opacity: 1;
    transform: translateY(0);
    pointer-events: auto;
}

.toast.is-exiting {
    animation: toastOut 0.2s ease;
}

@keyframes toastOut {
    to {
        opacity: 0;
        transform: translateY(8px);
    }
}

/* Toast icon */
.toast-icon {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 18px;
    height: 18px;
    font-size: 14px;
    font-weight: 700;
    line-height: 1;
    flex-shrink: 0;
}

/* Toast type variants */
.toast-success .toast-icon { color: var(--primary, #6D5EF6); }
.toast-error .toast-icon { color: #EF4444; }
.toast-warning .toast-icon { color: #F59E0B; }
.toast-info .toast-icon { color: #3B82F6; }

/* Toast message */
.toast-message {
    flex: 1;
    font-size: 13px !important;
    font-weight: 500 !important;
    color: rgba(15, 23, 42, 0.78) !important;
    line-height: 1.3 !important;
    margin: 0 !important;
    padding: 0 !important;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

/* Toast actions container */
.toast-actions {
    display: flex !important;
    flex-direction: row !important;
    align-items: center !important;
    gap: 6px !important;
    margin: 0 !important;
    padding: 0 !important;
    flex-shrink: 0;
}

/* Toast action button (generic, replaces toast-undo) */
.toast-action {
    display: inline-flex !important;
    align-items: center !important;
    justify-content: center !important;
    padding: 6px 9px !important;
    background: rgba(109, 94, 246, 0.10) !important;
    border: 1px solid rgba(109, 94, 246, 0.18) !important;
    border-radius: 10px !important;
    color: #4C3EF0 !important;
    font-size: 0.6875rem !important;
    font-weight: 700 !important;
    text-transform: uppercase !important;
    letter-spacing: 0.02em !important;
    cursor: pointer;
    transition: all 0.15s ease;
    margin: 0 !important;
    line-height: 1 !important;
}

.toast-action:hover {
    background: rgba(109, 94, 246, 0.16) !important;
    border-color: rgba(109, 94, 246, 0.28) !important;
}

/* Toast dismiss button */
.toast-dismiss {
    display: inline-flex !important;
    align-items: center !important;
    justify-content: center !important;
    width: 28px !important;
    height: 28px !important;
    background: transparent !important;
    border: 1px solid transparent !important;
    border-radius: 10px !important;
    color: rgba(15, 23, 42, 0.45) !important;
    font-size: 0.875rem !important;
    cursor: pointer;
    transition: all 0.15s ease;
    margin: 0 !important;
    padding: 0 !important;
    line-height: 1 !important;
}

.toast-dismiss:hover {
    background: rgba(15, 23, 42, 0.04) !important;
    border: 1px solid rgba(15, 23, 42, 0.08) !important;
    color: rgba(15, 23, 42, 0.70) !important;
}

/* Dark mode overrides */
[data-theme="dark"] .toast {
    background: rgba(30, 41, 59, 0.95) !important;
    border-color: rgba(148, 163, 184, 0.15) !important;
    color: var(--text-primary) !important;
}

[data-theme="dark"] .toast-message {
    color: rgba(241, 245, 249, 0.85) !important;
}

[data-theme="dark"] .toast-dismiss {
    color: rgba(148, 163, 184, 0.60) !important;
}

[data-theme="dark"] .toast-dismiss:hover {
    background: rgba(148, 163, 184, 0.10) !important;
    border-color: rgba(148, 163, 184, 0.20) !important;
    color: rgba(241, 245, 249, 0.90) !important;
}

/* ===== Additional Animation Keyframes ===== */

/* Modal enter */
@keyframes modalIn {
    from {
        opacity: 0;
        transform: scale(0.95) translateY(-10px);
    }
    to {
        opacity: 1;
        transform: scale(1) translateY(0);
    }
}

/* Modal backdrop */
@keyframes backdropIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

/* Dropdown open */
@keyframes dropdownIn {
    from {
        opacity: 0;
        transform: translateY(-4px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Checkbox tick bounce */
@keyframes tickBounce {
    0% { transform: scale(0); }
    50% { transform: scale(1.2); }
    100% { transform: scale(1); }
}

/* Pulse (attention) */
@keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
}

/* Focus ring expand */
@keyframes focusRingExpand {
    from {
        box-shadow: 0 0 0 0 rgba(109, 94, 246, 0.4);
    }
    to {
        box-shadow: 0 0 0 4px rgba(109, 94, 246, 0);
    }
}

/* =============================================================================
   Reduced Motion - Disable or simplify animations
   ============================================================================= */

@media (prefers-reduced-motion: reduce) {
    .spinner {
        animation: none;
        /* Show static ring instead of spinning */
        border-color: var(--primary);
        border-top-color: transparent;
    }

    .skeleton {
        animation: none;
        /* Show static placeholder */
        background: var(--bg-panel);
    }

    .toast {
        animation: none;
    }

    .toast.is-exiting {
        animation: none;
        opacity: 0;
    }
}
