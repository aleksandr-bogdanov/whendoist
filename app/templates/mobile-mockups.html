{% extends "base.html" %}

{% block title %}Mobile Layout Mockups - Whendoist{% endblock %}

{% block extra_css %}
<style>
/* =============================================================================
   MOBILE MOCKUPS PAGE
   View at /mockups - test layout options on mobile

   Core UX principle: User selects exact time range on calendar, not presets.
   Power users want control, not hand-holding.
   ============================================================================= */

.mockups-page {
    min-height: 100vh;
    background: var(--bg-canvas);
}

/* Navigation between mockups */
.mockup-nav {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: 1000;
    background: var(--bg-panel);
    border-bottom: 1px solid var(--border-default);
    padding: 8px 16px;
    display: flex;
    gap: 8px;
}

.mockup-nav-btn {
    flex: 1;
    padding: 10px 16px;
    border-radius: var(--radius-md);
    border: 1px solid var(--border-default);
    background: var(--bg-surface);
    color: var(--text-primary);
    font-size: 0.8125rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.15s ease;
}

.mockup-nav-btn.active {
    background: var(--primary);
    color: white;
    border-color: var(--primary);
}

/* Mockup containers */
.mockup-container {
    display: none;
    padding-top: 56px;
    min-height: 100vh;
}

.mockup-container.active {
    display: block;
}

/* =============================================================================
   SHARED COMPONENTS
   ============================================================================= */

/* Task item */
.task-item {
    background: var(--bg-surface);
    border: 1px solid var(--border-subtle);
    border-radius: var(--radius-md);
    padding: 12px;
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 8px;
    transition: all 0.15s ease;
}

.task-item[data-impact="1"] { border-left: 3px solid #ef4444; }
.task-item[data-impact="2"] { border-left: 3px solid #f59e0b; }
.task-item[data-impact="3"] { border-left: 3px solid #3b82f6; }
.task-item[data-impact="4"] { border-left: 3px solid #94a3b8; }

.task-item__check {
    width: 20px;
    height: 20px;
    border: 2px solid var(--border-default);
    border-radius: 50%;
    flex-shrink: 0;
    cursor: pointer;
    transition: all 0.15s ease;
}

.task-item__check:active {
    transform: scale(0.9);
    background: var(--primary);
    border-color: var(--primary);
}

.task-item__content {
    flex: 1;
    min-width: 0;
}

.task-item__title {
    font-size: 0.875rem;
    color: var(--text-primary);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.task-item__meta {
    display: flex;
    gap: 8px;
    margin-top: 4px;
    font-size: 0.75rem;
    color: var(--text-secondary);
}

.task-item__tag {
    padding: 2px 6px;
    border-radius: 4px;
    font-size: 0.6875rem;
    font-weight: 600;
}

.task-item__tag--energy { background: rgba(109, 94, 246, 0.1); color: var(--primary); }
.task-item__tag--duration { background: rgba(0, 0, 0, 0.05); }

/* Energy filter pills */
.energy-filter {
    display: flex;
    gap: 6px;
}

.energy-pill {
    width: 36px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--bg-surface);
    border: 1px solid var(--border-default);
    border-radius: var(--radius-md);
    font-size: 1rem;
    cursor: pointer;
    opacity: 0.5;
    transition: all 0.15s ease;
}

.energy-pill.active {
    opacity: 1;
    border-color: var(--primary);
    background: rgba(109, 94, 246, 0.1);
}

/* Hour grid (shared calendar component) */
.hour-grid {
    position: relative;
}

.hour-row {
    display: flex;
    align-items: flex-start;
    min-height: 48px;
    border-top: 1px solid var(--border-subtle);
}

.hour-label {
    width: 44px;
    padding: 4px 8px 4px 0;
    font-size: 0.6875rem;
    color: var(--text-muted);
    text-align: right;
    flex-shrink: 0;
}

.hour-slot {
    flex: 1;
    min-height: 48px;
    position: relative;
}

/* Calendar event */
.cal-event {
    position: absolute;
    left: 4px;
    right: 4px;
    padding: 4px 8px;
    background: rgba(109, 94, 246, 0.12);
    border-left: 3px solid var(--primary);
    border-radius: 4px;
    font-size: 0.75rem;
    color: var(--text-primary);
    overflow: hidden;
}

.cal-event--gcal {
    background: rgba(66, 133, 244, 0.12);
    border-left-color: #4285f4;
}

.cal-event__time {
    font-size: 0.625rem;
    color: var(--text-secondary);
}

.cal-event__title {
    font-weight: 500;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

/* Selection overlay */
.selection-overlay {
    position: absolute;
    left: 44px;
    right: 0;
    background: rgba(109, 94, 246, 0.15);
    border: 2px solid var(--primary);
    border-radius: 4px;
    pointer-events: none;
    z-index: 10;
    display: none;
}

.selection-overlay.active {
    display: block;
}

.selection-overlay__time {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: var(--primary);
    color: white;
    padding: 6px 12px;
    border-radius: var(--radius-md);
    font-size: 0.8125rem;
    font-weight: 600;
    white-space: nowrap;
    pointer-events: auto;
}

/* Plan button that appears in selection */
.plan-selection-btn {
    position: absolute;
    bottom: 8px;
    left: 50%;
    transform: translateX(-50%);
    padding: 10px 20px;
    background: var(--primary);
    color: white;
    border: none;
    border-radius: var(--radius-lg);
    font-size: 0.875rem;
    font-weight: 700;
    cursor: pointer;
    pointer-events: auto;
    box-shadow: 0 4px 12px rgba(109, 94, 246, 0.4);
    display: flex;
    align-items: center;
    gap: 6px;
}

/* =============================================================================
   OPTION B: BOTTOM SHEET CALENDAR

   - Tasks are the main view (full screen)
   - Calendar lives in a bottom sheet
   - Tap "Plan" â†’ sheet expands â†’ user drags to select time range
   - Selection shows "Plan Tasks" button
   ============================================================================= */
.option-b {
    display: flex;
    flex-direction: column;
    min-height: calc(100vh - 56px);
    background: var(--bg-canvas);
}

.option-b__header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 12px 16px;
    background: var(--bg-panel);
    border-bottom: 1px solid var(--border-default);
}

.option-b__title {
    font-size: 1rem;
    font-weight: 700;
    color: var(--text-primary);
}

.option-b__tasks {
    flex: 1;
    padding: 12px 16px;
    overflow-y: auto;
    padding-bottom: 100px; /* space for bottom sheet */
}

.option-b__domain {
    margin-bottom: 16px;
}

.option-b__domain-name {
    font-size: 0.6875rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--text-secondary);
    margin-bottom: 8px;
    padding-left: 4px;
}

/* Bottom Sheet */
.option-b__sheet {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    background: var(--bg-panel);
    border-top: 1px solid var(--border-default);
    border-radius: 16px 16px 0 0;
    box-shadow: 0 -4px 24px rgba(0, 0, 0, 0.12);
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    z-index: 100;
    max-height: 85vh;
    transform: translateY(calc(100% - 72px)); /* Show only peek */
}

.option-b__sheet.expanded {
    transform: translateY(0);
}

.option-b__sheet-handle {
    width: 36px;
    height: 4px;
    background: var(--border-default);
    border-radius: 2px;
    margin: 10px auto;
    cursor: grab;
}

.option-b__sheet-peek {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 16px 12px;
}

.option-b__sheet-info {
    flex: 1;
}

.option-b__sheet-date {
    font-size: 0.9375rem;
    font-weight: 700;
    color: var(--text-primary);
}

.option-b__sheet-stats {
    font-size: 0.75rem;
    color: var(--text-secondary);
    margin-top: 2px;
}

.option-b__sheet-plan-btn {
    padding: 10px 16px;
    background: var(--primary);
    color: white;
    border: none;
    border-radius: var(--radius-md);
    font-size: 0.8125rem;
    font-weight: 700;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 6px;
    transition: transform 0.15s ease;
}

.option-b__sheet-plan-btn:active {
    transform: scale(0.97);
}

/* Calendar content */
.option-b__sheet-calendar {
    padding: 0 8px 16px;
    overflow-y: auto;
    max-height: calc(85vh - 72px);
}

.option-b__sheet-day-nav {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 16px;
    padding: 8px 16px 16px;
    position: sticky;
    top: 0;
    background: var(--bg-panel);
    z-index: 5;
}

.option-b__nav-btn {
    width: 32px;
    height: 32px;
    border: none;
    background: var(--bg-surface);
    border-radius: var(--radius-sm);
    font-size: 0.875rem;
    cursor: pointer;
    color: var(--text-secondary);
}

.option-b__nav-date {
    font-size: 0.875rem;
    font-weight: 600;
    color: var(--text-primary);
}

/* Selection mode indicator */
.option-b__selection-hint {
    display: none;
    padding: 8px 16px;
    background: rgba(109, 94, 246, 0.1);
    text-align: center;
    font-size: 0.75rem;
    color: var(--primary);
    font-weight: 500;
}

.option-b__sheet.selection-mode .option-b__selection-hint {
    display: block;
}

.option-b__sheet.selection-mode .option-b__sheet-plan-btn {
    background: var(--text-secondary);
}

/* =============================================================================
   OPTION C: FAB + INLINE SELECTION

   - Keeps familiar tab structure (Tasks / Schedule)
   - FAB always visible, shows count of plannable tasks
   - Tap FAB â†’ switches to Schedule tab + enters selection mode
   - User drags to select time range directly on calendar
   - No modal, no presets - direct manipulation
   ============================================================================= */
.option-c {
    display: flex;
    flex-direction: column;
    min-height: calc(100vh - 56px);
    background: var(--bg-canvas);
}

.option-c__tabs {
    display: flex;
    background: var(--bg-panel);
    border-bottom: 1px solid var(--border-default);
}

.option-c__tab {
    flex: 1;
    padding: 12px;
    text-align: center;
    font-size: 0.875rem;
    font-weight: 600;
    color: var(--text-secondary);
    border: none;
    background: none;
    cursor: pointer;
    border-bottom: 2px solid transparent;
    transition: all 0.15s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
}

.option-c__tab.active {
    color: var(--primary);
    border-bottom-color: var(--primary);
}

.option-c__tab-badge {
    padding: 2px 6px;
    background: var(--primary);
    color: white;
    border-radius: 10px;
    font-size: 0.6875rem;
    font-weight: 700;
}

.option-c__panel {
    display: none;
    flex: 1;
    overflow-y: auto;
}

.option-c__panel.active {
    display: block;
}

/* Tasks panel */
.option-c__tasks {
    padding: 12px 16px;
    padding-bottom: 100px;
}

.option-c__domain {
    margin-bottom: 16px;
}

.option-c__domain-name {
    font-size: 0.6875rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--text-secondary);
    margin-bottom: 8px;
    padding-left: 4px;
}

/* Schedule panel */
.option-c__schedule {
    padding-bottom: 100px;
}

.option-c__schedule-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 12px 16px;
    background: var(--bg-panel);
    border-bottom: 1px solid var(--border-default);
    position: sticky;
    top: 0;
    z-index: 5;
}

.option-c__date-nav {
    display: flex;
    align-items: center;
    gap: 12px;
}

.option-c__nav-btn {
    width: 32px;
    height: 32px;
    border: none;
    background: var(--bg-surface);
    border-radius: var(--radius-sm);
    font-size: 0.875rem;
    cursor: pointer;
    color: var(--text-secondary);
}

.option-c__date {
    font-size: 0.9375rem;
    font-weight: 700;
    color: var(--text-primary);
}

.option-c__today-btn {
    padding: 6px 12px;
    background: var(--bg-surface);
    border: 1px solid var(--border-default);
    border-radius: var(--radius-sm);
    font-size: 0.75rem;
    font-weight: 600;
    color: var(--text-secondary);
    cursor: pointer;
}

.option-c__calendar {
    padding: 0 8px 16px;
}

/* Selection mode banner */
.option-c__selection-banner {
    display: none;
    padding: 10px 16px;
    background: linear-gradient(135deg, var(--primary) 0%, #8B7CF7 100%);
    color: white;
    text-align: center;
    font-size: 0.8125rem;
    font-weight: 500;
}

.option-c.selection-mode .option-c__selection-banner {
    display: block;
}

.option-c__cancel-selection {
    background: rgba(255,255,255,0.2);
    border: none;
    color: white;
    padding: 4px 12px;
    border-radius: var(--radius-sm);
    font-size: 0.75rem;
    font-weight: 600;
    cursor: pointer;
    margin-left: 12px;
}

/* FAB */
.option-c__fab {
    position: fixed;
    bottom: 24px;
    right: 24px;
    width: 60px;
    height: 60px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--primary) 0%, #8B7CF7 100%);
    color: white;
    border: none;
    font-size: 1.5rem;
    cursor: pointer;
    box-shadow: 0 4px 16px rgba(109, 94, 246, 0.4);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 100;
    transition: transform 0.15s ease, box-shadow 0.15s ease;
}

.option-c__fab:active {
    transform: scale(0.95);
}

.option-c__fab-badge {
    position: absolute;
    top: -2px;
    right: -2px;
    min-width: 20px;
    height: 20px;
    padding: 0 5px;
    background: #ef4444;
    color: white;
    border-radius: 10px;
    font-size: 0.6875rem;
    font-weight: 700;
    display: flex;
    align-items: center;
    justify-content: center;
    border: 2px solid var(--bg-canvas);
}

/* FAB tooltip on first visit */
.option-c__fab-hint {
    position: fixed;
    bottom: 92px;
    right: 24px;
    background: var(--text-primary);
    color: var(--bg-panel);
    padding: 8px 12px;
    border-radius: var(--radius-md);
    font-size: 0.75rem;
    font-weight: 500;
    white-space: nowrap;
    z-index: 100;
    opacity: 0;
    transform: translateY(8px);
    transition: all 0.2s ease;
    pointer-events: none;
}

.option-c__fab-hint::after {
    content: '';
    position: absolute;
    bottom: -6px;
    right: 24px;
    border-left: 6px solid transparent;
    border-right: 6px solid transparent;
    border-top: 6px solid var(--text-primary);
}

.option-c__fab:hover + .option-c__fab-hint,
.option-c__fab-hint.show {
    opacity: 1;
    transform: translateY(0);
}

/* Selection mode: hide FAB, show cancel in banner */
.option-c.selection-mode .option-c__fab {
    display: none;
}
</style>
{% endblock %}

{% block content %}
<div class="mockups-page">
    <!-- Navigation -->
    <nav class="mockup-nav">
        <button class="mockup-nav-btn active" data-mockup="b">B: Bottom Sheet</button>
        <button class="mockup-nav-btn" data-mockup="c">C: FAB + Direct</button>
    </nav>

    <!-- =======================================================================
         OPTION B: BOTTOM SHEET CALENDAR

         Tasks as main view. Calendar slides up from bottom.
         Tap Plan â†’ expand sheet â†’ drag to select interval â†’ Plan Tasks.
         ======================================================================= -->
    <div class="mockup-container active" data-mockup="b">
        <div class="option-b">
            <div class="option-b__header">
                <div class="option-b__title">Tasks</div>
                <div class="energy-filter">
                    <button class="energy-pill" data-energy="1">ðŸ§Ÿ</button>
                    <button class="energy-pill active" data-energy="2">â˜•</button>
                    <button class="energy-pill" data-energy="3">ðŸ§ </button>
                </div>
            </div>

            <div class="option-b__tasks">
                <div class="option-b__domain">
                    <div class="option-b__domain-name">Work</div>
                    <div class="task-item" data-impact="1">
                        <div class="task-item__check"></div>
                        <div class="task-item__content">
                            <div class="task-item__title">Review Q4 budget proposal</div>
                            <div class="task-item__meta">
                                <span class="task-item__tag task-item__tag--energy">ðŸ§ </span>
                                <span class="task-item__tag task-item__tag--duration">45m</span>
                            </div>
                        </div>
                    </div>
                    <div class="task-item" data-impact="2">
                        <div class="task-item__check"></div>
                        <div class="task-item__content">
                            <div class="task-item__title">Prepare presentation slides</div>
                            <div class="task-item__meta">
                                <span class="task-item__tag task-item__tag--energy">â˜•</span>
                                <span class="task-item__tag task-item__tag--duration">1h</span>
                            </div>
                        </div>
                    </div>
                    <div class="task-item" data-impact="3">
                        <div class="task-item__check"></div>
                        <div class="task-item__content">
                            <div class="task-item__title">Reply to client emails</div>
                            <div class="task-item__meta">
                                <span class="task-item__tag task-item__tag--energy">ðŸ§Ÿ</span>
                                <span class="task-item__tag task-item__tag--duration">30m</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="option-b__domain">
                    <div class="option-b__domain-name">Personal</div>
                    <div class="task-item" data-impact="2">
                        <div class="task-item__check"></div>
                        <div class="task-item__content">
                            <div class="task-item__title">Call dentist for appointment</div>
                            <div class="task-item__meta">
                                <span class="task-item__tag task-item__tag--energy">ðŸ§Ÿ</span>
                                <span class="task-item__tag task-item__tag--duration">10m</span>
                            </div>
                        </div>
                    </div>
                    <div class="task-item" data-impact="4">
                        <div class="task-item__check"></div>
                        <div class="task-item__content">
                            <div class="task-item__title">Organize desktop files</div>
                            <div class="task-item__meta">
                                <span class="task-item__tag task-item__tag--energy">ðŸ§Ÿ</span>
                                <span class="task-item__tag task-item__tag--duration">30m</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Bottom Sheet -->
            <div class="option-b__sheet" id="option-b-sheet">
                <div class="option-b__sheet-handle"></div>
                <div class="option-b__sheet-peek">
                    <div class="option-b__sheet-info">
                        <div class="option-b__sheet-date">Fri, Jan 24</div>
                        <div class="option-b__sheet-stats">3 events â€¢ 2h free</div>
                    </div>
                    <button class="option-b__sheet-plan-btn" id="option-b-plan-btn">
                        <span>âœ¨</span>
                        <span>Plan</span>
                    </button>
                </div>

                <div class="option-b__selection-hint">
                    Drag on calendar to select time range
                </div>

                <div class="option-b__sheet-day-nav">
                    <button class="option-b__nav-btn">â—€</button>
                    <span class="option-b__nav-date">Friday, January 24</span>
                    <button class="option-b__nav-btn">â–¶</button>
                </div>

                <div class="option-b__sheet-calendar">
                    <div class="hour-grid" id="option-b-grid">
                        <div class="selection-overlay" id="option-b-selection">
                            <span class="selection-overlay__time" id="option-b-selection-time">10:00 - 12:00</span>
                            <button class="plan-selection-btn" id="option-b-plan-selection">
                                <span>âœ¨</span> Plan Tasks
                            </button>
                        </div>

                        <div class="hour-row" data-hour="8">
                            <span class="hour-label">8:00</span>
                            <div class="hour-slot"></div>
                        </div>
                        <div class="hour-row" data-hour="9">
                            <span class="hour-label">9:00</span>
                            <div class="hour-slot">
                                <div class="cal-event cal-event--gcal" style="top: 0; height: 32px;">
                                    <div class="cal-event__title">Team standup</div>
                                </div>
                            </div>
                        </div>
                        <div class="hour-row" data-hour="10">
                            <span class="hour-label">10:00</span>
                            <div class="hour-slot"></div>
                        </div>
                        <div class="hour-row" data-hour="11">
                            <span class="hour-label">11:00</span>
                            <div class="hour-slot">
                                <div class="cal-event cal-event--gcal" style="top: 0; height: 32px;">
                                    <div class="cal-event__title">1:1 with manager</div>
                                </div>
                            </div>
                        </div>
                        <div class="hour-row" data-hour="12">
                            <span class="hour-label">12:00</span>
                            <div class="hour-slot"></div>
                        </div>
                        <div class="hour-row" data-hour="13">
                            <span class="hour-label">13:00</span>
                            <div class="hour-slot"></div>
                        </div>
                        <div class="hour-row" data-hour="14">
                            <span class="hour-label">14:00</span>
                            <div class="hour-slot">
                                <div class="cal-event cal-event--gcal" style="top: 0; height: 48px;">
                                    <div class="cal-event__title">Sprint planning</div>
                                </div>
                            </div>
                        </div>
                        <div class="hour-row" data-hour="15">
                            <span class="hour-label">15:00</span>
                            <div class="hour-slot"></div>
                        </div>
                        <div class="hour-row" data-hour="16">
                            <span class="hour-label">16:00</span>
                            <div class="hour-slot"></div>
                        </div>
                        <div class="hour-row" data-hour="17">
                            <span class="hour-label">17:00</span>
                            <div class="hour-slot"></div>
                        </div>
                        <div class="hour-row" data-hour="18">
                            <span class="hour-label">18:00</span>
                            <div class="hour-slot"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- =======================================================================
         OPTION C: FAB + DIRECT CALENDAR SELECTION

         Familiar tabs (Tasks / Schedule). FAB always visible.
         Tap FAB â†’ jumps to Schedule tab + enters selection mode.
         Drag to select interval. No modal, no presets.
         ======================================================================= -->
    <div class="mockup-container" data-mockup="c">
        <div class="option-c" id="option-c-container">
            <div class="option-c__tabs">
                <button class="option-c__tab active" data-tab="tasks">
                    <span>ðŸ“‹</span>
                    <span>Tasks</span>
                    <span class="option-c__tab-badge">5</span>
                </button>
                <button class="option-c__tab" data-tab="schedule">
                    <span>ðŸ“…</span>
                    <span>Schedule</span>
                </button>
            </div>

            <div class="option-c__selection-banner" id="option-c-selection-banner">
                Drag to select time range
                <button class="option-c__cancel-selection" id="option-c-cancel">Cancel</button>
            </div>

            <!-- Tasks Panel -->
            <div class="option-c__panel option-c__tasks active" data-panel="tasks">
                <div class="option-c__domain">
                    <div class="option-c__domain-name">Work</div>
                    <div class="task-item" data-impact="1">
                        <div class="task-item__check"></div>
                        <div class="task-item__content">
                            <div class="task-item__title">Review Q4 budget proposal</div>
                            <div class="task-item__meta">
                                <span class="task-item__tag task-item__tag--energy">ðŸ§ </span>
                                <span class="task-item__tag task-item__tag--duration">45m</span>
                            </div>
                        </div>
                    </div>
                    <div class="task-item" data-impact="2">
                        <div class="task-item__check"></div>
                        <div class="task-item__content">
                            <div class="task-item__title">Prepare presentation slides</div>
                            <div class="task-item__meta">
                                <span class="task-item__tag task-item__tag--energy">â˜•</span>
                                <span class="task-item__tag task-item__tag--duration">1h</span>
                            </div>
                        </div>
                    </div>
                    <div class="task-item" data-impact="3">
                        <div class="task-item__check"></div>
                        <div class="task-item__content">
                            <div class="task-item__title">Reply to client emails</div>
                            <div class="task-item__meta">
                                <span class="task-item__tag task-item__tag--energy">ðŸ§Ÿ</span>
                                <span class="task-item__tag task-item__tag--duration">30m</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="option-c__domain">
                    <div class="option-c__domain-name">Personal</div>
                    <div class="task-item" data-impact="2">
                        <div class="task-item__check"></div>
                        <div class="task-item__content">
                            <div class="task-item__title">Call dentist for appointment</div>
                            <div class="task-item__meta">
                                <span class="task-item__tag task-item__tag--energy">ðŸ§Ÿ</span>
                                <span class="task-item__tag task-item__tag--duration">10m</span>
                            </div>
                        </div>
                    </div>
                    <div class="task-item" data-impact="4">
                        <div class="task-item__check"></div>
                        <div class="task-item__content">
                            <div class="task-item__title">Organize desktop files</div>
                            <div class="task-item__meta">
                                <span class="task-item__tag task-item__tag--energy">ðŸ§Ÿ</span>
                                <span class="task-item__tag task-item__tag--duration">30m</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Schedule Panel -->
            <div class="option-c__panel option-c__schedule" data-panel="schedule">
                <div class="option-c__schedule-header">
                    <div class="option-c__date-nav">
                        <button class="option-c__nav-btn">â—€</button>
                        <div class="option-c__date">Fri, Jan 24</div>
                        <button class="option-c__nav-btn">â–¶</button>
                    </div>
                    <button class="option-c__today-btn">Today</button>
                </div>

                <div class="option-c__calendar">
                    <div class="hour-grid" id="option-c-grid">
                        <div class="selection-overlay" id="option-c-selection">
                            <span class="selection-overlay__time" id="option-c-selection-time">15:00 - 17:00</span>
                            <button class="plan-selection-btn" id="option-c-plan-selection">
                                <span>âœ¨</span> Plan Tasks
                            </button>
                        </div>

                        <div class="hour-row" data-hour="8">
                            <span class="hour-label">8:00</span>
                            <div class="hour-slot"></div>
                        </div>
                        <div class="hour-row" data-hour="9">
                            <span class="hour-label">9:00</span>
                            <div class="hour-slot">
                                <div class="cal-event cal-event--gcal" style="top: 0; height: 32px;">
                                    <div class="cal-event__title">Team standup</div>
                                </div>
                            </div>
                        </div>
                        <div class="hour-row" data-hour="10">
                            <span class="hour-label">10:00</span>
                            <div class="hour-slot"></div>
                        </div>
                        <div class="hour-row" data-hour="11">
                            <span class="hour-label">11:00</span>
                            <div class="hour-slot">
                                <div class="cal-event cal-event--gcal" style="top: 0; height: 32px;">
                                    <div class="cal-event__title">1:1 with manager</div>
                                </div>
                            </div>
                        </div>
                        <div class="hour-row" data-hour="12">
                            <span class="hour-label">12:00</span>
                            <div class="hour-slot"></div>
                        </div>
                        <div class="hour-row" data-hour="13">
                            <span class="hour-label">13:00</span>
                            <div class="hour-slot"></div>
                        </div>
                        <div class="hour-row" data-hour="14">
                            <span class="hour-label">14:00</span>
                            <div class="hour-slot">
                                <div class="cal-event cal-event--gcal" style="top: 0; height: 48px;">
                                    <div class="cal-event__title">Sprint planning</div>
                                </div>
                            </div>
                        </div>
                        <div class="hour-row" data-hour="15">
                            <span class="hour-label">15:00</span>
                            <div class="hour-slot"></div>
                        </div>
                        <div class="hour-row" data-hour="16">
                            <span class="hour-label">16:00</span>
                            <div class="hour-slot"></div>
                        </div>
                        <div class="hour-row" data-hour="17">
                            <span class="hour-label">17:00</span>
                            <div class="hour-slot"></div>
                        </div>
                        <div class="hour-row" data-hour="18">
                            <span class="hour-label">18:00</span>
                            <div class="hour-slot"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- FAB -->
            <button class="option-c__fab" id="option-c-fab">âœ¨
                <span class="option-c__fab-badge">5</span>
            </button>
            <div class="option-c__fab-hint" id="option-c-fab-hint">Tap to plan tasks</div>
        </div>
    </div>
</div>

<script>
// =============================================================================
// MOCKUP NAVIGATION
// =============================================================================
document.querySelectorAll('.mockup-nav-btn').forEach(btn => {
    btn.addEventListener('click', () => {
        const mockup = btn.dataset.mockup;
        document.querySelectorAll('.mockup-nav-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        document.querySelectorAll('.mockup-container').forEach(c => c.classList.remove('active'));
        document.querySelector(`[data-mockup="${mockup}"].mockup-container`).classList.add('active');
    });
});

// Energy pills (both options)
document.querySelectorAll('.energy-pill').forEach(pill => {
    pill.addEventListener('click', () => {
        const container = pill.closest('.energy-filter');
        container.querySelectorAll('.energy-pill').forEach(p => p.classList.remove('active'));
        pill.classList.add('active');
    });
});

// =============================================================================
// OPTION B: BOTTOM SHEET
// =============================================================================
const sheetB = document.getElementById('option-b-sheet');
const planBtnB = document.getElementById('option-b-plan-btn');
const gridB = document.getElementById('option-b-grid');
const selectionB = document.getElementById('option-b-selection');
const selectionTimeB = document.getElementById('option-b-selection-time');

let isDraggingB = false;
let startHourB = null;
let endHourB = null;

// Tap Plan â†’ expand sheet and enter selection mode
planBtnB.addEventListener('click', () => {
    sheetB.classList.add('expanded');
    sheetB.classList.add('selection-mode');
});

// Handle touch/drag on calendar
gridB.addEventListener('touchstart', handleStartB, { passive: false });
gridB.addEventListener('touchmove', handleMoveB, { passive: false });
gridB.addEventListener('touchend', handleEndB);
gridB.addEventListener('mousedown', handleStartB);
gridB.addEventListener('mousemove', handleMoveB);
gridB.addEventListener('mouseup', handleEndB);

function getHourFromEvent(e, grid) {
    const rect = grid.getBoundingClientRect();
    const clientY = e.touches ? e.touches[0].clientY : e.clientY;
    const y = clientY - rect.top + grid.scrollTop;
    const hourHeight = 48;
    return Math.floor(y / hourHeight) + 8; // Starting at 8:00
}

function handleStartB(e) {
    if (!sheetB.classList.contains('selection-mode')) return;
    isDraggingB = true;
    startHourB = getHourFromEvent(e, gridB);
    endHourB = startHourB + 1;
    updateSelectionB();
    e.preventDefault();
}

function handleMoveB(e) {
    if (!isDraggingB) return;
    endHourB = getHourFromEvent(e, gridB) + 1;
    if (endHourB <= startHourB) endHourB = startHourB + 1;
    updateSelectionB();
    e.preventDefault();
}

function handleEndB() {
    if (!isDraggingB) return;
    isDraggingB = false;
}

function updateSelectionB() {
    if (startHourB === null) return;
    const hourHeight = 48;
    const top = (Math.min(startHourB, endHourB) - 8) * hourHeight;
    const height = Math.abs(endHourB - startHourB) * hourHeight;

    selectionB.style.top = top + 'px';
    selectionB.style.height = height + 'px';
    selectionB.classList.add('active');

    const startFormatted = String(Math.min(startHourB, endHourB)).padStart(2, '0') + ':00';
    const endFormatted = String(Math.max(startHourB, endHourB)).padStart(2, '0') + ':00';
    selectionTimeB.textContent = `${startFormatted} - ${endFormatted}`;
}

// Close sheet when clicking outside
document.addEventListener('click', (e) => {
    if (sheetB.classList.contains('expanded') && !sheetB.contains(e.target)) {
        sheetB.classList.remove('expanded');
        sheetB.classList.remove('selection-mode');
        selectionB.classList.remove('active');
        startHourB = null;
    }
});

// =============================================================================
// OPTION C: FAB + DIRECT SELECTION
// =============================================================================
const containerC = document.getElementById('option-c-container');
const fabC = document.getElementById('option-c-fab');
const fabHintC = document.getElementById('option-c-fab-hint');
const cancelC = document.getElementById('option-c-cancel');
const gridC = document.getElementById('option-c-grid');
const selectionC = document.getElementById('option-c-selection');
const selectionTimeC = document.getElementById('option-c-selection-time');

let isDraggingC = false;
let startHourC = null;
let endHourC = null;

// Tab switching
document.querySelectorAll('.option-c__tab').forEach(tab => {
    tab.addEventListener('click', () => {
        const panel = tab.dataset.tab;
        document.querySelectorAll('.option-c__tab').forEach(t => t.classList.remove('active'));
        tab.classList.add('active');
        document.querySelectorAll('.option-c__panel').forEach(p => p.classList.remove('active'));
        document.querySelector(`[data-panel="${panel}"]`).classList.add('active');
    });
});

// FAB: switch to schedule tab + enter selection mode
fabC.addEventListener('click', () => {
    // Switch to schedule tab
    document.querySelectorAll('.option-c__tab').forEach(t => t.classList.remove('active'));
    document.querySelector('[data-tab="schedule"]').classList.add('active');
    document.querySelectorAll('.option-c__panel').forEach(p => p.classList.remove('active'));
    document.querySelector('[data-panel="schedule"]').classList.add('active');

    // Enter selection mode
    containerC.classList.add('selection-mode');
});

// Cancel selection
cancelC.addEventListener('click', () => {
    containerC.classList.remove('selection-mode');
    selectionC.classList.remove('active');
    startHourC = null;
});

// Show FAB hint briefly
setTimeout(() => {
    fabHintC.classList.add('show');
    setTimeout(() => fabHintC.classList.remove('show'), 3000);
}, 1000);

// Handle touch/drag on calendar
gridC.addEventListener('touchstart', handleStartC, { passive: false });
gridC.addEventListener('touchmove', handleMoveC, { passive: false });
gridC.addEventListener('touchend', handleEndC);
gridC.addEventListener('mousedown', handleStartC);
gridC.addEventListener('mousemove', handleMoveC);
gridC.addEventListener('mouseup', handleEndC);

function handleStartC(e) {
    if (!containerC.classList.contains('selection-mode')) return;
    isDraggingC = true;
    startHourC = getHourFromEvent(e, gridC);
    endHourC = startHourC + 1;
    updateSelectionC();
    e.preventDefault();
}

function handleMoveC(e) {
    if (!isDraggingC) return;
    endHourC = getHourFromEvent(e, gridC) + 1;
    if (endHourC <= startHourC) endHourC = startHourC + 1;
    updateSelectionC();
    e.preventDefault();
}

function handleEndC() {
    if (!isDraggingC) return;
    isDraggingC = false;
}

function updateSelectionC() {
    if (startHourC === null) return;
    const hourHeight = 48;
    const top = (Math.min(startHourC, endHourC) - 8) * hourHeight;
    const height = Math.abs(endHourC - startHourC) * hourHeight;

    selectionC.style.top = top + 'px';
    selectionC.style.height = height + 'px';
    selectionC.classList.add('active');

    const startFormatted = String(Math.min(startHourC, endHourC)).padStart(2, '0') + ':00';
    const endFormatted = String(Math.max(startHourC, endHourC)).padStart(2, '0') + ':00';
    selectionTimeC.textContent = `${startFormatted} - ${endFormatted}`;
}
</script>
{% endblock %}
