{% extends "base.html" %}

{% block title %}Mobile Layout Mockups - Whendoist{% endblock %}

{% block extra_css %}
<style>
/* =============================================================================
   MOBILE MOCKUPS - Optimized for iPhone 15 Pro Max (430Ã—932pt)
   ============================================================================= */

:root {
    --safe-top: env(safe-area-inset-top, 0px);
    --safe-bottom: env(safe-area-inset-bottom, 0px);
    --nav-height: 52px;
}

.mockups-page {
    min-height: 100vh;
    min-height: 100dvh;
    background: var(--bg-canvas);
    -webkit-user-select: none;
    user-select: none;
}

/* =============================================================================
   NAVIGATION
   ============================================================================= */
.mockup-nav {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: 1000;
    background: var(--bg-panel);
    border-bottom: 1px solid var(--border-default);
    padding: calc(var(--safe-top) + 8px) 16px 12px;
    display: flex;
    gap: 12px;
}

.mockup-nav-btn {
    flex: 1;
    padding: 14px 20px;
    border-radius: 12px;
    border: none;
    background: var(--bg-surface);
    color: var(--text-primary);
    font-size: 0.9375rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s ease;
    -webkit-tap-highlight-color: transparent;
}

.mockup-nav-btn.active {
    background: var(--primary);
    color: white;
    box-shadow: 0 4px 12px rgba(109, 94, 246, 0.3);
}

/* =============================================================================
   MOCKUP CONTAINERS
   ============================================================================= */
.mockup-container {
    display: none;
    padding-top: calc(var(--safe-top) + var(--nav-height) + 12px);
    min-height: 100vh;
    min-height: 100dvh;
}

.mockup-container.active {
    display: flex;
    flex-direction: column;
}

/* =============================================================================
   SHARED: TASK ITEMS
   ============================================================================= */
.task-item {
    background: var(--bg-surface);
    border-radius: 14px;
    padding: 14px 16px;
    display: flex;
    align-items: center;
    gap: 14px;
    margin-bottom: 10px;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.04);
    transition: transform 0.15s ease, box-shadow 0.15s ease;
    -webkit-tap-highlight-color: transparent;
}

.task-item:active {
    transform: scale(0.98);
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.06);
}

.task-item[data-impact="1"] { border-left: 4px solid #ef4444; }
.task-item[data-impact="2"] { border-left: 4px solid #f59e0b; }
.task-item[data-impact="3"] { border-left: 4px solid #3b82f6; }
.task-item[data-impact="4"] { border-left: 4px solid #94a3b8; }

.task-item__check {
    width: 24px;
    height: 24px;
    border: 2.5px solid var(--border-default);
    border-radius: 50%;
    flex-shrink: 0;
    transition: all 0.15s ease;
}

.task-item__check:active {
    transform: scale(0.85);
    background: var(--primary);
    border-color: var(--primary);
}

.task-item__content {
    flex: 1;
    min-width: 0;
}

.task-item__title {
    font-size: 1rem;
    font-weight: 500;
    color: var(--text-primary);
    line-height: 1.3;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

.task-item__meta {
    display: flex;
    gap: 8px;
    margin-top: 6px;
}

.task-item__tag {
    padding: 4px 10px;
    border-radius: 8px;
    font-size: 0.8125rem;
    font-weight: 600;
}

.task-item__tag--energy {
    background: rgba(109, 94, 246, 0.12);
    color: var(--primary);
}

.task-item__tag--duration {
    background: var(--bg-panel);
    color: var(--text-secondary);
}

/* =============================================================================
   SHARED: ENERGY FILTER
   ============================================================================= */
.energy-filter {
    display: flex;
    gap: 8px;
}

.energy-pill {
    width: 44px;
    height: 44px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--bg-surface);
    border: 2px solid var(--border-subtle);
    border-radius: 12px;
    font-size: 1.25rem;
    cursor: pointer;
    opacity: 0.4;
    transition: all 0.2s ease;
    -webkit-tap-highlight-color: transparent;
}

.energy-pill.active {
    opacity: 1;
    border-color: var(--primary);
    background: rgba(109, 94, 246, 0.1);
    box-shadow: 0 2px 8px rgba(109, 94, 246, 0.2);
}

/* =============================================================================
   SHARED: DOMAIN HEADERS
   ============================================================================= */
.domain-group {
    margin-bottom: 24px;
}

.domain-name {
    font-size: 0.75rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: var(--text-muted);
    margin-bottom: 12px;
    padding-left: 4px;
}

/* =============================================================================
   SHARED: HOUR GRID
   ============================================================================= */
.hour-grid {
    position: relative;
    background: var(--bg-surface);
    border-radius: 16px;
    overflow: hidden;
    margin: 0 12px;
}

.hour-row {
    display: flex;
    align-items: flex-start;
    min-height: 56px;
    border-top: 1px solid var(--border-subtle);
}

.hour-row:first-of-type {
    border-top: none;
}

.hour-label {
    width: 52px;
    padding: 8px 12px 8px 0;
    font-size: 0.75rem;
    font-weight: 500;
    color: var(--text-muted);
    text-align: right;
    flex-shrink: 0;
}

.hour-slot {
    flex: 1;
    min-height: 56px;
    position: relative;
}

/* Calendar events */
.cal-event {
    position: absolute;
    left: 4px;
    right: 8px;
    padding: 6px 10px;
    background: rgba(66, 133, 244, 0.12);
    border-left: 3px solid #4285f4;
    border-radius: 6px;
    font-size: 0.8125rem;
    overflow: hidden;
}

.cal-event__title {
    font-weight: 600;
    color: var(--text-primary);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

/* Selection overlay */
.selection-overlay {
    position: absolute;
    left: 52px;
    right: 8px;
    background: rgba(109, 94, 246, 0.15);
    border: 2.5px solid var(--primary);
    border-radius: 10px;
    z-index: 10;
    display: none;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 12px;
}

.selection-overlay.active {
    display: flex;
}

.selection-overlay__time {
    background: var(--primary);
    color: white;
    padding: 8px 16px;
    border-radius: 10px;
    font-size: 0.9375rem;
    font-weight: 700;
    letter-spacing: 0.02em;
    box-shadow: 0 4px 12px rgba(109, 94, 246, 0.3);
}

.plan-selection-btn {
    padding: 12px 24px;
    background: white;
    color: var(--primary);
    border: none;
    border-radius: 12px;
    font-size: 0.9375rem;
    font-weight: 700;
    cursor: pointer;
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);
    display: flex;
    align-items: center;
    gap: 8px;
    -webkit-tap-highlight-color: transparent;
}

.plan-selection-btn:active {
    transform: scale(0.96);
}

/* =============================================================================
   OPTION B: BOTTOM SHEET
   ============================================================================= */
.option-b {
    flex: 1;
    display: flex;
    flex-direction: column;
    background: var(--bg-canvas);
}

.option-b__header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 16px 20px;
    background: var(--bg-panel);
}

.option-b__title {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--text-primary);
}

.option-b__tasks {
    flex: 1;
    padding: 20px;
    overflow-y: auto;
    padding-bottom: 120px;
    -webkit-overflow-scrolling: touch;
}

/* Bottom Sheet */
.option-b__sheet {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    background: var(--bg-panel);
    border-radius: 24px 24px 0 0;
    box-shadow: 0 -8px 32px rgba(0, 0, 0, 0.12);
    transition: transform 0.35s cubic-bezier(0.32, 0.72, 0, 1);
    z-index: 100;
    max-height: 80vh;
    transform: translateY(calc(100% - 88px - var(--safe-bottom)));
}

.option-b__sheet.expanded {
    transform: translateY(0);
}

.option-b__sheet-handle-area {
    padding: 12px 0 8px;
    cursor: grab;
}

.option-b__sheet-handle {
    width: 40px;
    height: 5px;
    background: var(--border-default);
    border-radius: 3px;
    margin: 0 auto;
}

.option-b__sheet-peek {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 4px 20px 16px;
}

.option-b__sheet-info {
    flex: 1;
}

.option-b__sheet-date {
    font-size: 1.125rem;
    font-weight: 700;
    color: var(--text-primary);
}

.option-b__sheet-stats {
    font-size: 0.875rem;
    color: var(--text-secondary);
    margin-top: 4px;
}

.option-b__plan-btn {
    padding: 14px 24px;
    background: linear-gradient(135deg, var(--primary) 0%, #8B7CF7 100%);
    color: white;
    border: none;
    border-radius: 14px;
    font-size: 1rem;
    font-weight: 700;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 8px;
    box-shadow: 0 4px 16px rgba(109, 94, 246, 0.35);
    transition: transform 0.15s ease;
    -webkit-tap-highlight-color: transparent;
}

.option-b__plan-btn:active {
    transform: scale(0.96);
}

/* Selection mode styling */
.option-b__selection-hint {
    display: none;
    padding: 12px 20px;
    background: linear-gradient(135deg, rgba(109, 94, 246, 0.1) 0%, rgba(139, 124, 247, 0.1) 100%);
    text-align: center;
    font-size: 0.875rem;
    color: var(--primary);
    font-weight: 600;
}

.option-b__sheet.selection-mode .option-b__selection-hint {
    display: block;
}

.option-b__sheet.selection-mode .option-b__plan-btn {
    background: var(--text-muted);
    box-shadow: none;
}

/* Calendar in sheet */
.option-b__sheet-calendar {
    padding: 0 8px calc(var(--safe-bottom) + 16px);
    overflow-y: auto;
    max-height: calc(80vh - 140px);
    -webkit-overflow-scrolling: touch;
}

.option-b__day-nav {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 20px;
    padding: 12px 20px 20px;
    position: sticky;
    top: 0;
    background: var(--bg-panel);
    z-index: 5;
}

.option-b__nav-btn {
    width: 40px;
    height: 40px;
    border: none;
    background: var(--bg-surface);
    border-radius: 12px;
    font-size: 1rem;
    cursor: pointer;
    color: var(--text-secondary);
    display: flex;
    align-items: center;
    justify-content: center;
    -webkit-tap-highlight-color: transparent;
}

.option-b__nav-btn:active {
    background: var(--bg-panel);
}

.option-b__nav-date {
    font-size: 1rem;
    font-weight: 600;
    color: var(--text-primary);
}

/* =============================================================================
   OPTION C: FAB + TABS
   ============================================================================= */
.option-c {
    flex: 1;
    display: flex;
    flex-direction: column;
    background: var(--bg-canvas);
}

.option-c__tabs {
    display: flex;
    background: var(--bg-panel);
    padding: 0 8px;
}

.option-c__tab {
    flex: 1;
    padding: 16px 12px;
    text-align: center;
    font-size: 1rem;
    font-weight: 600;
    color: var(--text-secondary);
    border: none;
    background: none;
    cursor: pointer;
    border-bottom: 3px solid transparent;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    -webkit-tap-highlight-color: transparent;
}

.option-c__tab.active {
    color: var(--primary);
    border-bottom-color: var(--primary);
}

.option-c__tab-icon {
    font-size: 1.25rem;
}

.option-c__tab-badge {
    padding: 3px 8px;
    background: var(--primary);
    color: white;
    border-radius: 10px;
    font-size: 0.75rem;
    font-weight: 700;
}

.option-c__panel {
    display: none;
    flex: 1;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
}

.option-c__panel.active {
    display: block;
}

/* Tasks panel */
.option-c__tasks-content {
    padding: 20px;
    padding-bottom: 120px;
}

/* Schedule panel */
.option-c__schedule-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 16px 20px;
    background: var(--bg-panel);
    position: sticky;
    top: 0;
    z-index: 5;
}

.option-c__date-nav {
    display: flex;
    align-items: center;
    gap: 16px;
}

.option-c__nav-btn {
    width: 40px;
    height: 40px;
    border: none;
    background: var(--bg-surface);
    border-radius: 12px;
    font-size: 1rem;
    cursor: pointer;
    color: var(--text-secondary);
    display: flex;
    align-items: center;
    justify-content: center;
    -webkit-tap-highlight-color: transparent;
}

.option-c__date {
    font-size: 1.125rem;
    font-weight: 700;
    color: var(--text-primary);
}

.option-c__today-btn {
    padding: 10px 16px;
    background: var(--bg-surface);
    border: none;
    border-radius: 10px;
    font-size: 0.875rem;
    font-weight: 600;
    color: var(--text-secondary);
    cursor: pointer;
    -webkit-tap-highlight-color: transparent;
}

.option-c__calendar-wrap {
    padding: 16px 0 calc(120px + var(--safe-bottom));
}

/* Selection banner */
.option-c__selection-banner {
    display: none;
    padding: 14px 20px;
    background: linear-gradient(135deg, var(--primary) 0%, #8B7CF7 100%);
    color: white;
    align-items: center;
    justify-content: space-between;
}

.option-c.selection-mode .option-c__selection-banner {
    display: flex;
}

.option-c__selection-text {
    font-size: 0.9375rem;
    font-weight: 600;
}

.option-c__cancel-btn {
    padding: 8px 16px;
    background: rgba(255, 255, 255, 0.2);
    border: none;
    border-radius: 8px;
    color: white;
    font-size: 0.875rem;
    font-weight: 600;
    cursor: pointer;
    -webkit-tap-highlight-color: transparent;
}

/* FAB */
.option-c__fab {
    position: fixed;
    bottom: calc(24px + var(--safe-bottom));
    right: 24px;
    width: 64px;
    height: 64px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--primary) 0%, #8B7CF7 100%);
    color: white;
    border: none;
    font-size: 1.75rem;
    cursor: pointer;
    box-shadow: 0 6px 24px rgba(109, 94, 246, 0.4);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 100;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
    -webkit-tap-highlight-color: transparent;
}

.option-c__fab:active {
    transform: scale(0.92);
    box-shadow: 0 4px 16px rgba(109, 94, 246, 0.5);
}

.option-c__fab-badge {
    position: absolute;
    top: -4px;
    right: -4px;
    min-width: 24px;
    height: 24px;
    padding: 0 7px;
    background: #ef4444;
    color: white;
    border-radius: 12px;
    font-size: 0.8125rem;
    font-weight: 700;
    display: flex;
    align-items: center;
    justify-content: center;
    border: 3px solid var(--bg-canvas);
    box-shadow: 0 2px 8px rgba(239, 68, 68, 0.3);
}

/* Hide FAB in selection mode */
.option-c.selection-mode .option-c__fab {
    display: none;
}
</style>
{% endblock %}

{% block content %}
<div class="mockups-page">
    <!-- Navigation -->
    <nav class="mockup-nav">
        <button class="mockup-nav-btn active" data-mockup="b">Bottom Sheet</button>
        <button class="mockup-nav-btn" data-mockup="c">FAB + Tabs</button>
    </nav>

    <!-- =======================================================================
         OPTION B: BOTTOM SHEET
         ======================================================================= -->
    <div class="mockup-container active" data-mockup="b">
        <div class="option-b">
            <div class="option-b__header">
                <div class="option-b__title">Tasks</div>
                <div class="energy-filter">
                    <button class="energy-pill" data-energy="1">ðŸ§Ÿ</button>
                    <button class="energy-pill active" data-energy="2">â˜•</button>
                    <button class="energy-pill" data-energy="3">ðŸ§ </button>
                </div>
            </div>

            <div class="option-b__tasks">
                <div class="domain-group">
                    <div class="domain-name">Work</div>
                    <div class="task-item" data-impact="1">
                        <div class="task-item__check"></div>
                        <div class="task-item__content">
                            <div class="task-item__title">Review Q4 budget proposal</div>
                            <div class="task-item__meta">
                                <span class="task-item__tag task-item__tag--energy">ðŸ§ </span>
                                <span class="task-item__tag task-item__tag--duration">45m</span>
                            </div>
                        </div>
                    </div>
                    <div class="task-item" data-impact="2">
                        <div class="task-item__check"></div>
                        <div class="task-item__content">
                            <div class="task-item__title">Prepare presentation slides</div>
                            <div class="task-item__meta">
                                <span class="task-item__tag task-item__tag--energy">â˜•</span>
                                <span class="task-item__tag task-item__tag--duration">1h</span>
                            </div>
                        </div>
                    </div>
                    <div class="task-item" data-impact="3">
                        <div class="task-item__check"></div>
                        <div class="task-item__content">
                            <div class="task-item__title">Reply to client emails</div>
                            <div class="task-item__meta">
                                <span class="task-item__tag task-item__tag--energy">ðŸ§Ÿ</span>
                                <span class="task-item__tag task-item__tag--duration">30m</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="domain-group">
                    <div class="domain-name">Personal</div>
                    <div class="task-item" data-impact="2">
                        <div class="task-item__check"></div>
                        <div class="task-item__content">
                            <div class="task-item__title">Call dentist for appointment</div>
                            <div class="task-item__meta">
                                <span class="task-item__tag task-item__tag--energy">ðŸ§Ÿ</span>
                                <span class="task-item__tag task-item__tag--duration">10m</span>
                            </div>
                        </div>
                    </div>
                    <div class="task-item" data-impact="4">
                        <div class="task-item__check"></div>
                        <div class="task-item__content">
                            <div class="task-item__title">Organize desktop files</div>
                            <div class="task-item__meta">
                                <span class="task-item__tag task-item__tag--energy">ðŸ§Ÿ</span>
                                <span class="task-item__tag task-item__tag--duration">30m</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="domain-group">
                    <div class="domain-name">Side Project</div>
                    <div class="task-item" data-impact="2">
                        <div class="task-item__check"></div>
                        <div class="task-item__content">
                            <div class="task-item__title">Fix authentication bug</div>
                            <div class="task-item__meta">
                                <span class="task-item__tag task-item__tag--energy">ðŸ§ </span>
                                <span class="task-item__tag task-item__tag--duration">1h</span>
                            </div>
                        </div>
                    </div>
                    <div class="task-item" data-impact="3">
                        <div class="task-item__check"></div>
                        <div class="task-item__content">
                            <div class="task-item__title">Write unit tests for API</div>
                            <div class="task-item__meta">
                                <span class="task-item__tag task-item__tag--energy">â˜•</span>
                                <span class="task-item__tag task-item__tag--duration">45m</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Bottom Sheet -->
            <div class="option-b__sheet" id="option-b-sheet">
                <div class="option-b__sheet-handle-area">
                    <div class="option-b__sheet-handle"></div>
                </div>
                <div class="option-b__sheet-peek">
                    <div class="option-b__sheet-info">
                        <div class="option-b__sheet-date">Friday, Jan 24</div>
                        <div class="option-b__sheet-stats">3 events Â· 2h 30m free</div>
                    </div>
                    <button class="option-b__plan-btn" id="option-b-plan-btn">
                        <span>âœ¨</span>
                        <span>Plan</span>
                    </button>
                </div>

                <div class="option-b__selection-hint">
                    Drag on calendar to select time range
                </div>

                <div class="option-b__day-nav">
                    <button class="option-b__nav-btn">â—€</button>
                    <span class="option-b__nav-date">Friday, January 24</span>
                    <button class="option-b__nav-btn">â–¶</button>
                </div>

                <div class="option-b__sheet-calendar">
                    <div class="hour-grid" id="option-b-grid">
                        <div class="selection-overlay" id="option-b-selection">
                            <span class="selection-overlay__time" id="option-b-selection-time">10:00 â€“ 12:00</span>
                            <button class="plan-selection-btn" id="option-b-plan-selection">
                                <span>âœ¨</span> Plan Tasks
                            </button>
                        </div>

                        <div class="hour-row" data-hour="8">
                            <span class="hour-label">8:00</span>
                            <div class="hour-slot"></div>
                        </div>
                        <div class="hour-row" data-hour="9">
                            <span class="hour-label">9:00</span>
                            <div class="hour-slot">
                                <div class="cal-event" style="top: 0; height: 36px;">
                                    <div class="cal-event__title">Team standup</div>
                                </div>
                            </div>
                        </div>
                        <div class="hour-row" data-hour="10">
                            <span class="hour-label">10:00</span>
                            <div class="hour-slot"></div>
                        </div>
                        <div class="hour-row" data-hour="11">
                            <span class="hour-label">11:00</span>
                            <div class="hour-slot">
                                <div class="cal-event" style="top: 0; height: 36px;">
                                    <div class="cal-event__title">1:1 with manager</div>
                                </div>
                            </div>
                        </div>
                        <div class="hour-row" data-hour="12">
                            <span class="hour-label">12:00</span>
                            <div class="hour-slot"></div>
                        </div>
                        <div class="hour-row" data-hour="13">
                            <span class="hour-label">13:00</span>
                            <div class="hour-slot"></div>
                        </div>
                        <div class="hour-row" data-hour="14">
                            <span class="hour-label">14:00</span>
                            <div class="hour-slot">
                                <div class="cal-event" style="top: 0; height: 56px;">
                                    <div class="cal-event__title">Sprint planning</div>
                                </div>
                            </div>
                        </div>
                        <div class="hour-row" data-hour="15">
                            <span class="hour-label">15:00</span>
                            <div class="hour-slot"></div>
                        </div>
                        <div class="hour-row" data-hour="16">
                            <span class="hour-label">16:00</span>
                            <div class="hour-slot"></div>
                        </div>
                        <div class="hour-row" data-hour="17">
                            <span class="hour-label">17:00</span>
                            <div class="hour-slot"></div>
                        </div>
                        <div class="hour-row" data-hour="18">
                            <span class="hour-label">18:00</span>
                            <div class="hour-slot"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- =======================================================================
         OPTION C: FAB + TABS
         ======================================================================= -->
    <div class="mockup-container" data-mockup="c">
        <div class="option-c" id="option-c-container">
            <div class="option-c__tabs">
                <button class="option-c__tab active" data-tab="tasks">
                    <span class="option-c__tab-icon">ðŸ“‹</span>
                    <span>Tasks</span>
                    <span class="option-c__tab-badge">7</span>
                </button>
                <button class="option-c__tab" data-tab="schedule">
                    <span class="option-c__tab-icon">ðŸ“…</span>
                    <span>Schedule</span>
                </button>
            </div>

            <div class="option-c__selection-banner">
                <span class="option-c__selection-text">Drag to select time</span>
                <button class="option-c__cancel-btn" id="option-c-cancel">Cancel</button>
            </div>

            <!-- Tasks Panel -->
            <div class="option-c__panel active" data-panel="tasks">
                <div class="option-c__tasks-content">
                    <div class="domain-group">
                        <div class="domain-name">Work</div>
                        <div class="task-item" data-impact="1">
                            <div class="task-item__check"></div>
                            <div class="task-item__content">
                                <div class="task-item__title">Review Q4 budget proposal</div>
                                <div class="task-item__meta">
                                    <span class="task-item__tag task-item__tag--energy">ðŸ§ </span>
                                    <span class="task-item__tag task-item__tag--duration">45m</span>
                                </div>
                            </div>
                        </div>
                        <div class="task-item" data-impact="2">
                            <div class="task-item__check"></div>
                            <div class="task-item__content">
                                <div class="task-item__title">Prepare presentation slides</div>
                                <div class="task-item__meta">
                                    <span class="task-item__tag task-item__tag--energy">â˜•</span>
                                    <span class="task-item__tag task-item__tag--duration">1h</span>
                                </div>
                            </div>
                        </div>
                        <div class="task-item" data-impact="3">
                            <div class="task-item__check"></div>
                            <div class="task-item__content">
                                <div class="task-item__title">Reply to client emails</div>
                                <div class="task-item__meta">
                                    <span class="task-item__tag task-item__tag--energy">ðŸ§Ÿ</span>
                                    <span class="task-item__tag task-item__tag--duration">30m</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="domain-group">
                        <div class="domain-name">Personal</div>
                        <div class="task-item" data-impact="2">
                            <div class="task-item__check"></div>
                            <div class="task-item__content">
                                <div class="task-item__title">Call dentist for appointment</div>
                                <div class="task-item__meta">
                                    <span class="task-item__tag task-item__tag--energy">ðŸ§Ÿ</span>
                                    <span class="task-item__tag task-item__tag--duration">10m</span>
                                </div>
                            </div>
                        </div>
                        <div class="task-item" data-impact="4">
                            <div class="task-item__check"></div>
                            <div class="task-item__content">
                                <div class="task-item__title">Organize desktop files</div>
                                <div class="task-item__meta">
                                    <span class="task-item__tag task-item__tag--energy">ðŸ§Ÿ</span>
                                    <span class="task-item__tag task-item__tag--duration">30m</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="domain-group">
                        <div class="domain-name">Side Project</div>
                        <div class="task-item" data-impact="2">
                            <div class="task-item__check"></div>
                            <div class="task-item__content">
                                <div class="task-item__title">Fix authentication bug</div>
                                <div class="task-item__meta">
                                    <span class="task-item__tag task-item__tag--energy">ðŸ§ </span>
                                    <span class="task-item__tag task-item__tag--duration">1h</span>
                                </div>
                            </div>
                        </div>
                        <div class="task-item" data-impact="3">
                            <div class="task-item__check"></div>
                            <div class="task-item__content">
                                <div class="task-item__title">Write unit tests for API</div>
                                <div class="task-item__meta">
                                    <span class="task-item__tag task-item__tag--energy">â˜•</span>
                                    <span class="task-item__tag task-item__tag--duration">45m</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Schedule Panel -->
            <div class="option-c__panel" data-panel="schedule">
                <div class="option-c__schedule-header">
                    <div class="option-c__date-nav">
                        <button class="option-c__nav-btn">â—€</button>
                        <div class="option-c__date">Fri, Jan 24</div>
                        <button class="option-c__nav-btn">â–¶</button>
                    </div>
                    <button class="option-c__today-btn">Today</button>
                </div>

                <div class="option-c__calendar-wrap">
                    <div class="hour-grid" id="option-c-grid">
                        <div class="selection-overlay" id="option-c-selection">
                            <span class="selection-overlay__time" id="option-c-selection-time">15:00 â€“ 17:00</span>
                            <button class="plan-selection-btn" id="option-c-plan-selection">
                                <span>âœ¨</span> Plan Tasks
                            </button>
                        </div>

                        <div class="hour-row" data-hour="8">
                            <span class="hour-label">8:00</span>
                            <div class="hour-slot"></div>
                        </div>
                        <div class="hour-row" data-hour="9">
                            <span class="hour-label">9:00</span>
                            <div class="hour-slot">
                                <div class="cal-event" style="top: 0; height: 36px;">
                                    <div class="cal-event__title">Team standup</div>
                                </div>
                            </div>
                        </div>
                        <div class="hour-row" data-hour="10">
                            <span class="hour-label">10:00</span>
                            <div class="hour-slot"></div>
                        </div>
                        <div class="hour-row" data-hour="11">
                            <span class="hour-label">11:00</span>
                            <div class="hour-slot">
                                <div class="cal-event" style="top: 0; height: 36px;">
                                    <div class="cal-event__title">1:1 with manager</div>
                                </div>
                            </div>
                        </div>
                        <div class="hour-row" data-hour="12">
                            <span class="hour-label">12:00</span>
                            <div class="hour-slot"></div>
                        </div>
                        <div class="hour-row" data-hour="13">
                            <span class="hour-label">13:00</span>
                            <div class="hour-slot"></div>
                        </div>
                        <div class="hour-row" data-hour="14">
                            <span class="hour-label">14:00</span>
                            <div class="hour-slot">
                                <div class="cal-event" style="top: 0; height: 56px;">
                                    <div class="cal-event__title">Sprint planning</div>
                                </div>
                            </div>
                        </div>
                        <div class="hour-row" data-hour="15">
                            <span class="hour-label">15:00</span>
                            <div class="hour-slot"></div>
                        </div>
                        <div class="hour-row" data-hour="16">
                            <span class="hour-label">16:00</span>
                            <div class="hour-slot"></div>
                        </div>
                        <div class="hour-row" data-hour="17">
                            <span class="hour-label">17:00</span>
                            <div class="hour-slot"></div>
                        </div>
                        <div class="hour-row" data-hour="18">
                            <span class="hour-label">18:00</span>
                            <div class="hour-slot"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- FAB -->
            <button class="option-c__fab" id="option-c-fab">âœ¨
                <span class="option-c__fab-badge">7</span>
            </button>
        </div>
    </div>
</div>

<script>
// =============================================================================
// NAVIGATION
// =============================================================================
document.querySelectorAll('.mockup-nav-btn').forEach(btn => {
    btn.addEventListener('click', () => {
        const mockup = btn.dataset.mockup;
        document.querySelectorAll('.mockup-nav-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        document.querySelectorAll('.mockup-container').forEach(c => c.classList.remove('active'));
        document.querySelector(`[data-mockup="${mockup}"].mockup-container`).classList.add('active');
    });
});

// Energy pills
document.querySelectorAll('.energy-pill').forEach(pill => {
    pill.addEventListener('click', () => {
        const container = pill.closest('.energy-filter');
        container.querySelectorAll('.energy-pill').forEach(p => p.classList.remove('active'));
        pill.classList.add('active');
    });
});

// =============================================================================
// OPTION B: BOTTOM SHEET
// =============================================================================
const sheetB = document.getElementById('option-b-sheet');
const planBtnB = document.getElementById('option-b-plan-btn');
const gridB = document.getElementById('option-b-grid');
const selectionB = document.getElementById('option-b-selection');
const selectionTimeB = document.getElementById('option-b-selection-time');

let isDraggingB = false;
let startYB = null;
let startHourB = null;
let endHourB = null;

planBtnB.addEventListener('click', (e) => {
    e.stopPropagation();
    sheetB.classList.add('expanded', 'selection-mode');
});

// Touch handling for selection
gridB.addEventListener('touchstart', handleStartB, { passive: false });
gridB.addEventListener('touchmove', handleMoveB, { passive: false });
gridB.addEventListener('touchend', handleEndB);
gridB.addEventListener('mousedown', handleStartB);
document.addEventListener('mousemove', handleMoveB);
document.addEventListener('mouseup', handleEndB);

function getHourFromY(y, grid) {
    const rect = grid.getBoundingClientRect();
    const relativeY = y - rect.top + grid.parentElement.scrollTop;
    const hourHeight = 56;
    return Math.floor(relativeY / hourHeight) + 8;
}

function handleStartB(e) {
    if (!sheetB.classList.contains('selection-mode')) return;
    isDraggingB = true;
    const clientY = e.touches ? e.touches[0].clientY : e.clientY;
    startHourB = getHourFromY(clientY, gridB);
    endHourB = startHourB + 1;
    updateSelectionB();
    e.preventDefault();
}

function handleMoveB(e) {
    if (!isDraggingB) return;
    const clientY = e.touches ? e.touches[0].clientY : e.clientY;
    const newHour = getHourFromY(clientY, gridB);
    endHourB = Math.max(startHourB + 1, newHour + 1);
    updateSelectionB();
    e.preventDefault();
}

function handleEndB() {
    isDraggingB = false;
}

function updateSelectionB() {
    if (startHourB === null) return;
    const hourHeight = 56;
    const minHour = Math.min(startHourB, endHourB - 1);
    const maxHour = Math.max(startHourB, endHourB - 1) + 1;
    const top = (minHour - 8) * hourHeight;
    const height = (maxHour - minHour) * hourHeight;

    selectionB.style.top = top + 'px';
    selectionB.style.height = height + 'px';
    selectionB.classList.add('active');

    const startStr = String(minHour).padStart(2, '0') + ':00';
    const endStr = String(maxHour).padStart(2, '0') + ':00';
    selectionTimeB.textContent = `${startStr} â€“ ${endStr}`;
}

// Close sheet on outside click
document.addEventListener('click', (e) => {
    if (sheetB.classList.contains('expanded') && !sheetB.contains(e.target) && e.target !== planBtnB) {
        sheetB.classList.remove('expanded', 'selection-mode');
        selectionB.classList.remove('active');
        startHourB = null;
    }
});

// =============================================================================
// OPTION C: FAB + TABS
// =============================================================================
const containerC = document.getElementById('option-c-container');
const fabC = document.getElementById('option-c-fab');
const cancelC = document.getElementById('option-c-cancel');
const gridC = document.getElementById('option-c-grid');
const selectionC = document.getElementById('option-c-selection');
const selectionTimeC = document.getElementById('option-c-selection-time');

let isDraggingC = false;
let startHourC = null;
let endHourC = null;

// Tab switching
document.querySelectorAll('.option-c__tab').forEach(tab => {
    tab.addEventListener('click', () => {
        const panel = tab.dataset.tab;
        document.querySelectorAll('.option-c__tab').forEach(t => t.classList.remove('active'));
        tab.classList.add('active');
        document.querySelectorAll('.option-c__panel').forEach(p => p.classList.remove('active'));
        document.querySelector(`[data-panel="${panel}"]`).classList.add('active');
    });
});

// FAB action
fabC.addEventListener('click', () => {
    // Switch to schedule
    document.querySelectorAll('.option-c__tab').forEach(t => t.classList.remove('active'));
    document.querySelector('[data-tab="schedule"]').classList.add('active');
    document.querySelectorAll('.option-c__panel').forEach(p => p.classList.remove('active'));
    document.querySelector('[data-panel="schedule"]').classList.add('active');
    // Enter selection mode
    containerC.classList.add('selection-mode');
});

cancelC.addEventListener('click', () => {
    containerC.classList.remove('selection-mode');
    selectionC.classList.remove('active');
    startHourC = null;
});

// Touch handling
gridC.addEventListener('touchstart', handleStartC, { passive: false });
gridC.addEventListener('touchmove', handleMoveC, { passive: false });
gridC.addEventListener('touchend', handleEndC);
gridC.addEventListener('mousedown', handleStartC);
document.addEventListener('mousemove', handleMoveC);
document.addEventListener('mouseup', handleEndC);

function handleStartC(e) {
    if (!containerC.classList.contains('selection-mode')) return;
    isDraggingC = true;
    const clientY = e.touches ? e.touches[0].clientY : e.clientY;
    startHourC = getHourFromY(clientY, gridC);
    endHourC = startHourC + 1;
    updateSelectionC();
    e.preventDefault();
}

function handleMoveC(e) {
    if (!isDraggingC) return;
    const clientY = e.touches ? e.touches[0].clientY : e.clientY;
    const newHour = getHourFromY(clientY, gridC);
    endHourC = Math.max(startHourC + 1, newHour + 1);
    updateSelectionC();
    e.preventDefault();
}

function handleEndC() {
    isDraggingC = false;
}

function updateSelectionC() {
    if (startHourC === null) return;
    const hourHeight = 56;
    const minHour = Math.min(startHourC, endHourC - 1);
    const maxHour = Math.max(startHourC, endHourC - 1) + 1;
    const top = (minHour - 8) * hourHeight;
    const height = (maxHour - minHour) * hourHeight;

    selectionC.style.top = top + 'px';
    selectionC.style.height = height + 'px';
    selectionC.classList.add('active');

    const startStr = String(minHour).padStart(2, '0') + ':00';
    const endStr = String(maxHour).padStart(2, '0') + ':00';
    selectionTimeC.textContent = `${startStr} â€“ ${endStr}`;
}
</script>
{% endblock %}
